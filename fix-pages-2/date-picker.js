import{c as e}from"./popover-559f65c4.js";function t(e,t){e.innerHTML="";const o=document.createElement("div");o.classList.add("calendar");const n=document.createElement("div");n.classList.add("month-year-picker"),n.innerHTML='\n        <button data-action="prev-month" aria-label="Previous Month">&lt;</button>\n        <span data-display="month-year"></span>\n        <button data-action="next-month" aria-label="Next Month">&gt;</button>\n    ',o.appendChild(n);const r=document.createElement("div");r.classList.add("calendar-grid"),function(e,t){e.innerHTML="";const o=t.getFullYear(),n=t.getMonth(),r=new Date(o,n,1).getDay(),a=new Date(o,n+1,0).getDate();for(let t=0;t<r;t++){const t=document.createElement("div");t.classList.add("empty"),e.appendChild(t)}for(let t=1;t<=a;t++){const r=document.createElement("button"),a=new Date(o,n,t);r.textContent=t,r.setAttribute("data-date",a.toISOString().split("T")[0]),r.setAttribute("tabindex","-1"),r.addEventListener("click",(()=>{const t=new CustomEvent("date-selected",{detail:{date:a}});e.dispatchEvent(t)})),e.appendChild(r)}}(r,t),o.appendChild(r),e.appendChild(o),function(e,t){const o=e.querySelector('[data-display="month-year"]'),n={month:"long",year:"numeric"};o.textContent=t.toLocaleDateString(void 0,n)}(n,t)}function o(e,o){const n=e.querySelector(".month-year-picker").querySelector('[data-display="month-year"]'),[r,a]=n.textContent.split(" "),i=new Date(`${r} 1, ${a}`);i.setMonth(i.getMonth()+o),t(e,i)}const n='\n<label for="control" id="label" part="label"><slot name="label"></slot></label>\n<div id="help" part="help"><slot name="help"></slot></div>\n<div id="error" part="error"><slot name="error"></slot></div>\n<div class="input-container">\n    <input id="control" part="control" aria-describedby="help error" readonly></input>\n    <button id="toggle" aria-label="Toggle Calendar" part="toggle-button">ðŸ“…</button>\n</div>\n<dialog tabindex="-1" part="popover" role="menu">\n    <div id="calendar-container">\n        \x3c!-- Calendar will be rendered here --\x3e\n    </div>\n</dialog>\n',r='\n:host {\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-size: var(--cek-font-size-1);\n\tfont-family: var(--cek-font-family);\n\tcolor: var(--cek-text-color-0);\n}\n\t\n#control {\n\tborder: var(--cek-form-control-border);\n\tborder-radius: var(--cek-border-radius);\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tcolor: inherit;\n}\n  \n#control:focus {\n\toutline: var(--cek-focus-ring);\n\toutline-offset: var(--cek-focus-ring-offset);\n}\n\n#error {\ncolor: var(--cek-text-color-error);\n}\n\n:host([help]) #help,\n:host([error]) #error {\nmargin-block-start: var(--cek-space-2);\n}\n\n:host([error]) #control {\nborder-color: var(--cek-border-color-error);\n}\n\n:host([error]) #control:focus {\n  outline-color: var(--cek-border-color-error);\n}\n\n:host([resize="none"]) #control {\n\tresize: none;\n}\n\ndialog {\n\tposition: fixed;\n\toutline: none;\n\tpadding: 0;\n\tmargin: 0;\n\tborder: var(--cek-border);\n\tbox-shadow:  var(--cek-shadow-3);\n\tborder-radius: var(--cek-border-radius);\n\tbackground-color: var(--cek-surface-color-0);\n}\n';class a extends HTMLElement{static get observedAttributes(){return[]}#e;#t;#o;constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<style>${r}</style>${n}`),this.#n(),this.#r(),this.#a(),this.#i()}#n(){this.#e=this.shadowRoot.querySelector("[part=popover]"),this.#o=this.shadowRoot.querySelector("[part=toggle-button]"),this.#o.setAttribute("aria-haspopup","true"),this.#o.setAttribute("aria-expanded","false")}#a(){const e=this.shadowRoot.querySelector("#calendar-container");var n,r;t(e,new Date),r=this,(n=e).addEventListener("date-selected",(e=>{r.shadowRoot.querySelector("#control").value=e.detail.date.toLocaleDateString(),r.hide()})),n.addEventListener("keydown",(e=>{const t=n.querySelectorAll("button[data-date]"),o=Array.from(t),a=o.indexOf(document.activeElement);switch(e.key){case"ArrowRight":e.preventDefault(),a<o.length-1&&o[a+1].focus();break;case"ArrowLeft":e.preventDefault(),a>0&&o[a-1].focus();break;case"ArrowDown":e.preventDefault(),a+7<o.length&&o[a+7].focus();break;case"ArrowUp":e.preventDefault(),a-7>=0&&o[a-7].focus();break;case"Enter":case" ":e.preventDefault(),document.activeElement.click();break;case"Escape":e.preventDefault(),r.hide()}})),n.querySelector(".month-year-picker").addEventListener("click",(e=>{e.target.matches('button[data-action="prev-month"]')&&o(n,-1),e.target.matches('button[data-action="next-month"]')&&o(n,1)}))}#i(){this.shadowRoot.querySelector("#toggle").addEventListener("click",(()=>{this.open?this.hide():this.show({focusOnMenuItem:!0})}))}#r(){this.#t=e({anchorElement:this.#o,popoverElement:this.#e,placement:this.placement,offset:this.offset,popoverWidth:this.popoverWidth??"content-width"})}show({focusOnMenuItem:e=!0,onOpenMenuItemIndexToFocus:o=0,force:n=!1}){if(!this.open||n){this.modal?this.#e.showPopover():this.#e.show(),this.#t.startAutoUpdatePosition(),this.#o.setAttribute("aria-expanded","true"),this.setAttribute("open",""),t(this.shadowRoot.querySelector("#calendar-container"),new Date);const e=this.shadowRoot.querySelector(`[data-date="${(new Date).toISOString().split("T")[0]}"]`);e?.focus()}else if(this.open){if(this.menuItems.find((e=>e===document.activeElement)))return;this.menuItems.at(o).focus()}}hide({focusOnTrigger:e}={focusOnTrigger:!0}){this.open&&(this.modal?(this.#e.hidePopover(),document.body.style.overflow=""):this.#e.close(),this.#t.stopAutoUpdatePosition(),this.#o.setAttribute("aria-expanded","false"),this.removeAttribute("open"))}}customElements.define("cek-date-picker",a);export{a as DatePicker,r as datePickerStyles,n as datePickerTemplate};
