const t=e=>{const l=(t=>{if("html"===t?.nodeName)return t;const e=t.assignedSlot||t.parentNode||t?.host||document.documentElement;return e?.host||e})(e);if(null===l||l===document.body)return null;return(o=l).scrollHeight>o.clientHeight||o.scrollWidth>o.clientWidth?l:t(l);var o},e=(e,l,o)=>{const h=(e=>{const l=new Set,o=new Set,h=[...e];for(;h.length>0;){const e=h.shift();if(o.has(e))continue;o.add(e);const i=t(e);i&&(l.add(i),h.push(i))}return[window,document.body,...l]})([e,l]);for(const t of h)t.addEventListener("scroll",o,{passive:!0}),t.addEventListener("resize",o);const i=((t,e)=>{let l,o=null;const h=document.documentElement,i=()=>{clearTimeout(l),o?.disconnect()},p=(s=!1,n=1)=>{i();const{left:y,top:g,width:$,height:d}=t.getBoundingClientRect();if(s||e(),!$||!d)return;const x={rootMargin:`${-Math.floor(g)}px ${-Math.floor(h.clientWidth-(y+$))}px ${-Math.floor(h.clientHeight-(g+d))}px ${-Math.floor(y)}px`,threshold:Math.max(0,Math.min(1,n))||1};let c=!0;o=new IntersectionObserver((([t])=>{const e=t.intersectionRatio;if(e!==n){if(!c)return p();l=setTimeout((()=>p(!1,e||1e-7)),1e3)}c=!1}),{...x,root:h.ownerDocument||h}),o.observe(t)};return p(!0),i})(e,o),p=new ResizeObserver((([t])=>{t.target===e&&(p.unobserve(l),requestAnimationFrame((()=>p.observe(l)))),o()}));return p.observe(e),p.observe(l),o(),()=>{for(const t of h)t.removeEventListener("scroll",o),t.removeEventListener("resize",o);i(),p.disconnect()}},l=({anchorElement:t,popoverElement:l,placement:o="bottom-start",offset:h=0,popoverWidth:i="anchor-width"})=>{let p,s;const n=()=>{const e=t.getBoundingClientRect(),s=l.getBoundingClientRect(),n=l.getRootNode();if("anchor-width"===i)l.style.width=`${e.width}px`;else if("include-previous-sibling"===i&&n.host.previousElementSibling){const t=n.host.previousElementSibling.offsetWidth;l.style.width=`${e.width+t}px`}else"content-width"===i&&(l.style.width="content-width");const y=window.innerHeight-e.bottom>=l.scrollHeight,g=e.top>=l.scrollHeight,$=window.innerWidth-e.right-h>=s.width,d=e.left-h>=s.width;switch(y||g?l.style.maxHeight="unset":(l.style.overflow="scroll",l.style.maxHeight=window.innerHeight-e.bottom-h-6+"px"),h>0&&!p&&(p=document.createElement("div"),p.style.position="fixed",p.setAttribute("part","hover-bridge"),l.appendChild(p)),h<0&&p&&(p.style.display="none"),o){case"left-start":if(l.style.top=d||$?`${e.top}px`:`${e.bottom}px`,l.style.left=d?e.left-s.width-h+"px":$?`${e.right+h}px`:`${e.left}px`,h>0&&(d||$))if(p.style.display="block",p.style.width=`${h}px`,p.style.top=`${e.top}px`,p.style.left=d||!$?`${s.right}px`:s.left-h+"px",e.height>s.height){const t=s.height/e.height*100;p.style.clipPath=d?`polygon(0 0, 100% 0, 100% 100%, 0 ${t}%)`:`polygon(0 0, 100% 0, 100% ${t}%, 0 100%)`,p.style.height=`${e.height}px`}else p.style.clipPath=d?`polygon(0 0, 100% 0, 100% ${e.height/s.height*100}%, 0 100%`:`polygon(0 0, 100% 0, 100% 100%, 0 ${e.height/s.height*100}%)`,p.style.height=`${s.height}px`;else h>0&&(p.style.display="none");break;case"left-end":if(p.style.display="block",l.style.top=d||$?e.bottom-s.height+"px":`${e.bottom}px`,l.style.left=d?e.left-s.width-h+"px":$?`${e.right+h}px`:`${e.left}px`,h>0&&(d||$))if(p.style.width=`${h}px`,p.style.left=d||!$?`${s.right}px`:s.left-h+"px",e.height>s.height){const t=s.height/e.height*100;p.style.clipPath=d?`polygon(0 ${100-t}%, 100% 0, 100% 100%, 0 100%)`:`polygon(0 0, 100% ${100-t}%, 100% 100%, 0 100%`,p.style.height=`${e.height}px`,p.style.top=`${e.top}px`}else{const t=e.height/s.height*100;p.style.clipPath=d?`polygon(0 0, 100% ${100-t}%, 100% 100%, 0 100%`:`polygon(0 ${100-t}%, 100% 0, 100% 100%, 0 100%)`,p.style.height=`${s.height}px`,p.style.top=e.bottom-s.height+"px"}else h>0&&(p.style.display="none");break;case"left":{const t=e.top+e.height/2-s.height/2;if(l.style.top=d||$?`${t}px`:`${e.bottom}px`,l.style.left=d?e.left-s.width-h+"px":$?`${e.right+h}px`:`${e.left}px`,h>0&&(d||$))if(p.style.display="block",p.style.width=`${h}px`,p.style.left=d?`${s.right}px`:s.left-h+"px",e.height>s.height){const t=s.height/e.height*100/2,l=50-t,o=50+t;p.style.clipPath=d?`polygon(0 ${l}%, 100% 0, 100% 100%, 0 ${o}%)`:`polygon(0 0, 100% ${l}%, 100% ${o}%, 0 100%)`,p.style.top=`${e.top}px`,p.style.height=`${e.height}px`}else{const t=e.height/s.height*100/2,l=50-t,o=50+t;p.style.clipPath=d?`polygon(0 0, 100% ${l}%, 100% ${o}%, 0 100%)`:`polygon(0 ${l}%, 100% 0, 100% 100%, 0 ${100-l}%)`,p.style.top=`${s.top}px`,p.style.height=`${s.height}px`}else h>0&&(p.style.display="none");break}case"right-start":if(l.style.top=d||$?`${e.top}px`:`${e.bottom}px`,l.style.left=$?`${e.right+h}px`:d?e.left-s.width-h+"px":`${e.left}px`,h>0&&(d||$))if(p.style.display="block",p.style.width=`${h}px`,p.style.top=`${e.top}px`,p.style.left=$||!d?s.left-h+"px":`${s.right}px`,e.height>s.height){const t=s.height/e.height*100;p.style.clipPath=$?`polygon(0 0, 100% 0, 100% ${t}%, 0 100%)`:`polygon(0 0, 100% 0, 100% 100%, 0 ${t}%)`,p.style.height=`${e.height}px`}else p.style.clipPath=$?`polygon(0 0, 100% 0, 100% 100%, 0 ${e.height/s.height*100}%)`:`polygon(0 0, 100% 0, 100% ${e.height/s.height*100}%, 0 100%`,p.style.height=`${s.height}px`;else h>0&&(p.style.display="none");break;case"right-end":if(p.style.display="block",l.style.top=d||$?e.bottom-s.height+"px":`${e.bottom}px`,l.style.left=$?`${e.right+h}px`:d?e.left-s.width-h+"px":`${e.left}px`,h>0&&(d||$))if(p.style.width=`${h}px`,p.style.left=$||!d?s.left-h+"px":`${s.right}px`,e.height>s.height){const t=s.height/e.height*100;p.style.clipPath=$?`polygon(0 0, 100% ${100-t}%, 100% 100%, 0 100%`:`polygon(0 ${100-t}%, 100% 0, 100% 100%, 0 100%)`,p.style.height=`${e.height}px`,p.style.top=`${e.top}px`}else{const t=e.height/s.height*100;p.style.clipPath=$?`polygon(0 ${100-t}%, 100% 0, 100% 100%, 0 100%)`:`polygon(0 0, 100% ${100-t}%, 100% 100%, 0 100%`,p.style.height=`${s.height}px`,p.style.top=e.bottom-s.height+"px"}else h>0&&(p.style.display="none");break;case"right":{const t=e.top+e.height/2-s.height/2;if(l.style.top=d||$?`${t}px`:`${e.bottom}px`,l.style.left=$?`${e.right+h}px`:d?e.left-s.width-h+"px":`${e.left}px`,h>0&&(d||$))if(p.style.display="block",p.style.width=`${h}px`,p.style.left=$?s.left-h+"px":`${s.right}px`,e.height>s.height){const t=s.height/e.height*100/2,l=50-t,o=50+t;p.style.clipPath=$?`polygon(0 0, 100% ${l}%, 100% ${o}%, 0 100%)`:`polygon(0 ${l}%, 100% 0, 100% 100%, 0 ${o}%)`,p.style.top=`${e.top}px`,p.style.height=`${e.height}px`}else{const t=e.height/s.height*100/2,l=50-t,o=50+t;p.style.clipPath=$?`polygon(0 ${l}%, 100% 0, 100% 100%, 0 ${100-l}%)`:`polygon(0 0, 100% ${l}%, 100% ${o}%, 0 100%)`,p.style.top=`${s.top}px`,p.style.height=`${s.height}px`}else h>0&&(p.style.display="none");break}case"top-start":if(l.style.top=g?e.top-s.height-h+"px":`${e.bottom+h}px`,l.style.left=`${e.left}px`,h>0)if(p.style.height=`${h}px`,p.style.width=`${Math.max(e.width,s.width)}px`,p.style.top=g?e.top-h+"px":`${e.bottom}px`,p.style.left=`${e.left}px`,e.width>s.width){const t=s.width/e.width*100;p.style.clipPath=g?`polygon(0 0, ${t}% 0, 100% 100%, 0 100%)`:`polygon(0 0, 100% 0, ${t}% 100%, 0 100%)`}else{const t=e.width/s.width*100;p.style.clipPath=g?`polygon(0 0, 100% 0, ${t}% 100%, 0 100%)`:`polygon(0 0, ${t}% 0, 100% 100%, 0 100%)`}break;case"top-end":if(l.style.top=g?e.top-s.height-h+"px":`${e.bottom+h}px`,l.style.left=e.right-s.width+"px",h>0)if(p.style.height=`${h}px`,p.style.width=`${Math.max(e.width,s.width)}px`,p.style.top=g?e.top-h+"px":`${e.bottom}px`,p.style.left=e.right-Math.max(e.width,s.width)+"px",e.width>s.width){const t=100-s.width/e.width*100;p.style.clipPath=g?`polygon(${t}% 0, 100% 0, 100% 100%, 0 100%)`:`polygon(0 0, 100% 0, 100% 100%, ${t}% 100%)`}else{const t=100-e.width/s.width*100;p.style.clipPath=g?`polygon(0 0, 100% 0, 100% 100%, ${t}% 100%)`:`polygon(${t}% 0, 100% 0, 100% 100%, 0 100%)`}break;case"top":{l.style.top=g?e.top-s.height-h+"px":`${e.bottom+h}px`;const t=s.width,o=e.left+e.width/2-t/2;if(l.style.left=`${o}px`,h>0)if(p.style.height=`${h}px`,p.style.width=`${s.width}px`,p.style.top=g?e.top-h+"px":`${e.bottom}px`,e.width>s.width){const t=s.left-e.left,l=s.right-e.left,o=t/e.width*100,h=l/e.width*100;p.style.clipPath=g?`polygon(${o}% 0, ${h}% 0, 100% 100%, 0 100%)`:`polygon(0 0, 100% 0, ${h}% 100%, ${o}% 100%)`,p.style.left=`${e.left}px`,p.style.width=`${e.width}px`}else{const t=e.left-s.left,l=e.right-s.left,h=t/s.width*100,i=l/s.width*100;p.style.clipPath=g?`polygon(0 0, 100% 0, ${i}% 100%, ${h}% 100%)`:`polygon(${h}% 0, ${i}% 0, 100% 100%, 0 100%)`,p.style.left=`${o}px`}break}case"bottom":{l.style.top=y?`${e.bottom+h}px`:e.top-s.height-h+"px";const t=s.width,o=e.left+e.width/2-t/2;if(l.style.left=`${o}px`,h>0)if(p.style.height=`${h}px`,p.style.width=`${s.width}px`,p.style.top=y?`${e.bottom}px`:e.top-h+"px",e.width>s.width){const t=s.left-e.left,l=s.right-e.left,o=t/e.width*100,h=l/e.width*100;p.style.clipPath=y?`polygon(0 0, 100% 0, ${h}% 100%, ${o}% 100%)`:`polygon(${o}% 0, ${h}% 0, 100% 100%, 0 100%)`,p.style.left=`${e.left}px`,p.style.width=`${e.width}px`}else{const t=e.left-s.left,l=e.right-s.left,h=t/s.width*100,i=l/s.width*100;p.style.clipPath=y?`polygon(${h}% 0, ${i}% 0, 100% 100%, 0 100%)`:`polygon(0 0, 100% 0, ${i}% 100%, ${h}% 100%)`,p.style.left=`${o}px`}break}case"bottom-start":if(l.style.top=y||!g?`${e.bottom+h}px`:e.top-s.height-h+"px",l.style.left=`${e.left}px`,h>0)if(p.style.height=`${h}px`,p.style.width=`${Math.max(e.width,s.width)}px`,p.style.top=y?`${e.bottom}px`:e.top-h+"px",p.style.left=`${e.left}px`,e.width>s.width){const t=s.width/e.width*100;p.style.clipPath=y?`polygon(0 0, 100% 0, ${t}% 100%, 0 100%)`:`polygon(0 0, ${t}% 0, 100% 100%, 0 100%)`}else{const t=e.width/s.width*100;p.style.clipPath=y?`polygon(0 0, ${t}% 0, 100% 100%, 0 100%)`:`polygon(0 0, 100% 0, ${t}% 100%, 0 100%)`}break;case"bottom-end":if(l.style.top=y||!g?`${e.bottom+h}px`:e.top-s.height-h+"px",l.style.left=e.right-s.width+"px",h>0)if(p.style.height=`${h}px`,p.style.width=`${Math.max(e.width,s.width)}px`,p.style.top=y?`${e.bottom}px`:e.top-h+"px",p.style.left=e.right-Math.max(e.width,s.width)+"px",e.width>s.width){const t=100-s.width/e.width*100;p.style.clipPath=y?`polygon(0 0, 100% 0, 100% 100%, ${t}% 100%)`:`polygon(${t}% 0, 100% 0, 100% 100%, 0 100%)`}else{const t=100-e.width/s.width*100;p.style.clipPath=y?`polygon( ${t}% 0, 100% 0, 100% 100%, 0 100%)`:`polygon(0 0, 100% 0, 100% 100%, ${t}% 100%)`}}};return{updatePosition:n,startAutoUpdatePosition:()=>{n(),s=e(t,l,n),p&&(p.style.display="block")},stopAutoUpdatePosition:()=>{s(),p&&(p.style.display="none")}}};export{l as c};
