<!doctype html><html lang="en"><head><base href="/custom-element-kit/fix-pages-2/"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Custom Element Kit Docs"><title>Custom Element Kit</title><link rel="stylesheet" href="./assets/styles.css"><link rel="stylesheet" href="./assets/page-layout.css"></head><body><div class="container"><header><h1 class="cek-text-2">Custom Element Kit</h1></header><div class="content"><aside><h2 class="cek-text-1 cek-text-bold">Getting Started</h2><ul><li><a href="welcome.html">Getting Started</a></li></ul><h2 class="cek-text-1 cek-text-bold">Components</h2><ul><li><a href="button.html">Button</a></li><li><a href="input.html">Input</a></li><li><a href="form.html">Form</a></li></ul></aside><main id="main-content"><!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Form-Associated Number Input Component Test</title><script>const optStyles=' <style>\n        [part="container"] {\n            display: flex;\n            align-items: center;\n            gap: 0;\n        }\n\n        [part="group"] {\n            display: flex;\n        }\n\n        [part="input"] {\n            width: 30px;\n            height: 40px;\n            font-size: 24px;\n            text-align: center;\n            border: 1px solid #ccc;\n            border-radius: 0;\n            -moz-appearance: textfield;\n            margin-left: -1px; /* Overlap borders slightly */\n        }\n\n        [part="input"]::-webkit-outer-spin-button,\n        [part="input"]::-webkit-inner-spin-button {\n            -webkit-appearance: none;\n            margin: 0;\n        }\n\n        [part="input"]:first-child {\n            border-top-left-radius: 6px;\n            border-bottom-left-radius: 6px;\n            margin-left: 0; /* Reset margin for the first input */\n        }\n\n        [part="input"]:last-child {\n            border-top-right-radius: 6px;\n            border-bottom-right-radius: 6px;\n        }\n\n        [part="separator"] {\n            margin: 0 10px;\n            font-size: 20px;\n            color: #ccc;\n        }\n\n\n        [part="input"]:focus {\n            outline: none;\n            box-shadow: 0 0 0 2px #007BFF; /* Custom focus ring */\n            z-index: 1; /* Prevent overlapping issues */\n        }\n\n        [part="input"].invalid {\n            border-color: red;\n        }\n\n        [part="error-message"] {\n            color: red;\n            font-size: 12px;\n            margin-top: 5px;\n            display: none;\n        }\n\n        [part="error-message"].visible {\n            display: block;\n        }\n    </style>';class InputDigit extends HTMLElement{static formAssociated=!0;static get observedAttributes(){return["required","group-size","groups"]}#t;#e;#i;#s;#n;constructor(){super(),this.#t=this.attachInternals(),this.#s=this.attachShadow({mode:"open"}),this.#n=!1}connectedCallback(){this.#e=parseInt(this.getAttribute("group-size"))||3,this.#i=parseInt(this.getAttribute("groups"))||2,this.#r(),this.#a(),this.hasAttribute("required")&&this.#t.setValidity({valueMissing:!0},"Number is required"),this.form&&(this.form.addEventListener("submit",this.#o.bind(this)),this.form.addEventListener("reset",this.#u.bind(this)))}disconnectedCallback(){this.#p()}attributeChangedCallback(t,e,i){if("required"===t){this.hasAttribute("required")&&!this.value?this.#t.setValidity({valueMissing:!0},"Number is required"):this.#t.setValidity({})}else"group-size"!==t&&"groups"!==t||(this.#e=parseInt(this.getAttribute("group-size"))||3,this.#i=parseInt(this.getAttribute("groups"))||2,this.#r(),this.#a())}get inputs(){return this.#s.querySelectorAll('[part="input"]')}get value(){return Array.from(this.inputs).map((t=>t.value)).join("")}set value(t){if("string"==typeof t){const e=t.replace(/\D/g,"").slice(0,this.#e*this.#i),i=this.inputs;e.split("").forEach(((t,e)=>{i[e]&&(i[e].value=t)})),this.#l()}}get form(){return this.#t.form}get name(){return this.getAttribute("name")}checkValidity(){return this.#t.checkValidity()}reportValidity(){return this.#t.reportValidity()}#r(){let t="";for(let e=0;e<this.#i;e++)t+=`\n                        <div part="group">\n                            ${this.#h(this.#e)}\n                        </div>\n                        ${e<this.#i-1?'<div part="separator">-</div>':""}\n                    `;this.#s.innerHTML=`\n                    ${optStyles}\n                    <div part="container">\n                        ${t}\n                    </div>\n                    <div part="error-message"></div> \x3c!-- Error message element --\x3e\n                `}#a(){this.inputs.forEach(((t,e)=>{t.addEventListener("beforeinput",(t=>this.#d(t))),t.addEventListener("input",(t=>this.#c(t,e))),t.addEventListener("keydown",(t=>this.#g(t,e))),t.addEventListener("paste",(t=>this.#m(t,e)))}))}#p(){this.inputs.forEach(((t,e)=>{t.removeEventListener("beforeinput",(t=>this.#d(t))),t.removeEventListener("input",(t=>this.#c(t,e))),t.removeEventListener("keydown",(t=>this.#g(t,e))),t.removeEventListener("paste",(t=>this.#m(t,e)))}))}#h(t){let e="";for(let i=0;i<t;i++)e+='<input type="number" part="input" maxlength="1" inputmode="numeric" pattern="[0-9]*" />';return e}#d(t){/^\d$/.test(t.data)||t.preventDefault()}#c(t,e){const i=t.target,s=i.value.replace(/\D/g,"");if(/^\d$/.test(s)){i.value=s;const t=this.inputs[e+1];t&&t.focus()}else""===s||(i.value="");this.#l()}#g(t,e){const i=t.target,s=()=>{t.preventDefault(),t.stopImmediatePropagation()};if("Backspace"===t.key)if(s(),""===i.value){const t=this.inputs[e-1];t&&(t.value="",t.focus())}else i.value="",this.#l();else if("ArrowLeft"===t.key){const t=this.inputs[e-1];t&&(s(),t.focus())}else if("ArrowRight"===t.key){const t=this.inputs[e+1];t&&(s(),t.focus())}else"Enter"===t.key?this.form&&this.form.requestSubmit():"ArrowUp"===t.key?(s(),i.value=(+i.value+1)%10,this.#l()):"ArrowDown"===t.key&&(s(),i.value=(+i.value-1+10)%10,this.#l())}#m(t,e){t.preventDefault();const i=(t.clipboardData||window.clipboardData).getData("text").replace(/\D/g,"").slice(0,this.#e*this.#i),s=this.inputs;i.split("").forEach(((t,i)=>{s[e+i]&&(s[e+i].value=t)})),this.#l();const n=this.inputs[e+i.length];n&&n.focus()}#o(t){this.checkValidity()||(t.preventDefault(),t.stopPropagation()),this.#n=!0,this.#l()}#u(t){this.#n=!1,this.#l();for(const t of this.inputs)t.value=""}#l(){const t=Array.from(this.inputs).map((t=>t.value)).join("");this.#t.setFormValue(t);let e=!0,i="";this.hasAttribute("required")&&(t.length<this.#e*this.#i?(e=!1,i=this.getAttribute("data-missingvalue")||"Number is incomplete",this.#t.setValidity({valueMissing:!0},i)):this.#t.setValidity({})),!e&&this.#n?(this.#s.querySelector('[part="error-message"]').textContent=i,this.#s.querySelector('[part="error-message"]').classList.add("visible")):(this.#s.querySelector('[part="error-message"]').textContent="",this.#s.querySelector('[part="error-message"]').classList.remove("visible")),this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0}))}}customElements.define("input-digit",InputDigit)</script></head><body><form novalidate="" id="otp-form" action="#" method="POST"><div><label for="otp">Enter Number:</label><input-digit required="" id="otp" name="otp" group-size="3" groups="2"></input-digit></div><div style="margin-top:20px"><button type="submit">Submit Number</button> <button type="reset">Reset Number</button></div></form><script>document.getElementById("otp-form").addEventListener("submit",(function(e){if(!e.target.checkValidity())return console.log("Form is invalid"),void e.preventDefault();e.preventDefault();const t=e.target.elements.otp.value;alert(`Submitted Number: ${t}`)}))</script></body></html></main></div></div><script type="module">import autoDefineElements from"./assets/auto-define-elements.mjs";autoDefineElements("production")</script></body></html>